<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>نوژا | افزودن محصول جدید</title>

    <!-- External CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Lalezar&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css"
      rel="stylesheet"
    />

    <style>
      :root {
        --bg-primary: #2b3441;
        --bg-secondary: #1c232d;
        --accent-primary: #e5ddd0;
        --accent-secondary: #c4c4c4;
        --text-primary: #e5ddd0;
        --text-secondary: #c4c4c4;
        --success: #4caf50;
        --warning: #ffc107;
        --danger: #ff4e83;
        --info: #2196f3;
      }

      body {
        font-family: 'Vazirmatn', sans-serif;
        background-color: var(--bg-primary);
        color: var(--text-primary);
      }

      .header {
        background: var(--bg-secondary);
        padding: 1rem;
        position: sticky;
        top: 0;
        z-index: 1000;
      }

      .admin-card {
        background: var(--bg-secondary);
        border: 1px solid rgba(229, 221, 208, 0.2);
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
      }

      .action-btn {
        background: transparent;
        border: 1px solid var(--accent-primary);
        color: var(--text-primary);
        border-radius: 8px;
        padding: 8px 16px;
        transition: all 0.2s;
      }

      .action-btn:hover {
        background: var(--accent-primary);
        color: var(--bg-primary);
      }

      .form-control,
      .form-select {
        background-color: var(--bg-primary);
        border: 1px solid rgba(229, 221, 208, 0.2);
        color: var (--text-primary);
      }

      .form-control:focus,
      .form-select:focus {
        background-color: var(--bg-primary);
        border-color: var(--accent-primary);
        color: var(--text-primary);
        box-shadow: none;
      }

      .help-text {
        background: rgba(33, 150, 243, 0.1);
        border: 1px solid var(--info);
        border-radius: 8px;
        padding: 1rem;
        margin-bottom: 1rem;
      }

      .image-upload {
        border: 2px dashed rgba(229, 221, 208, 0.2);
        border-radius: 12px;
        padding: 2rem;
        text-align: center;
        cursor: pointer;
        transition: all 0.2s;
      }

      .image-upload:hover {
        border-color: var(--accent-primary);
      }

      .variation-item {
        background: rgba(229, 221, 208, 0.05);
        border-radius: 8px;
        padding: 1rem;
        margin-bottom: 1rem;
      }

      .step-indicator {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background: var(--accent-primary);
        color: var(--bg-primary);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin-left: 8px;
        font-size: 14px;
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <div class="header mb-4">
      <div class="container">
        <div class="d-flex justify-content-between align-items-center">
          <div class="d-flex align-items-center gap-3">
            <button
              class="btn text-light"
              onclick="window.location.href='products.html'"
            >
              <i class="bi bi-arrow-right-short fs-4"></i>
            </button>
            <h4 class="mb-0">افزودن محصول جدید</h4>
          </div>
          <button class="action-btn" onclick="saveProduct()">
            <i class="bi bi-check-lg me-2"></i>
            ذخیره محصول
          </button>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="container">
      <div class="help-text mb-4">
        <h6 class="mb-3">
          <i class="bi bi-info-circle me-2"></i>راهنمای افزودن محصول
        </h6>
        <ul class="mb-0">
          <li>تمامی فیلدهای ستاره‌دار (*) اجباری هستند</li>
          <li>
            برای محصولات متغیر (مثل سایز یا رنگ) حتماً تنوع محصول را تکمیل کنید
          </li>
          <li>
            قیمت محصول را به دلار وارد کنید، سیستم به صورت خودکار به تومان تبدیل
            می‌کند
          </li>
          <li>حداقل یک تصویر اصلی برای محصول آپلود کنید</li>
        </ul>
      </div>

      <div class="row">
        <div class="col-md-8">
          <!-- Basic Information -->
          <div class="admin-card">
            <h5 class="mb-4">
              <span class="step-indicator">۱</span>
              اطلاعات پایه
            </h5>
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">نام محصول به انگلیسی *</label>
                <input
                  type="text"
                  class="form-control"
                  placeholder="مثال: Nike Air Max 270"
                />
                <small class="text-secondary"
                  >نام اصلی محصول در سایت منبع</small
                >
              </div>
              <div class="col-md-6">
                <label class="form-label">نام محصول به فارسی *</label>
                <input
                  type="text"
                  class="form-control"
                  placeholder="مثال: نایک ایر مکس ۲۷۰"
                />
                <small class="text-secondary"
                  >نامی که به کاربر نمایش داده می‌شود</small
                >
              </div>
              <div class="col-md-6">
                <label class="form-label">فروشگاه *</label>
                <select class="form-select">
                  <option value="">انتخاب کنید</option>
                  <option value="sephora">Sephora</option>
                  <option value="cultbeauty">Cult Beauty</option>
                  <option value="lookfantastic">Look Fantastic</option>
                  <option value="boots">Boots</option>
                  <option value="ulta">Ulta Beauty</option>
                </select>
              </div>
              <div class="col-md-6">
                <label class="form-label">دسته‌بندی *</label>
                <select class="form-select">
                  <option value="">انتخاب کنید</option>
                  <option value="skincare">مراقبت پوست</option>
                  <option value="makeup">آرایشی</option>
                  <option value="haircare">مراقبت مو</option>
                  <option value="fragrance">عطر و ادکلن</option>
                  <option value="bodycare">مراقبت بدن</option>
                  <option value="tools">ابزار آرایشی</option>
                  <option value="nailcare">مراقبت ناخن</option>
                  <option value="sets">ست های آرایشی</option>
                </select>
              </div>
              <div class="col-12">
                <label class="form-label">لینک محصول در سایت اصلی *</label>
                <input
                  type="url"
                  class="form-control"
                  placeholder="https://..."
                />
              </div>
              <div class="col-12">
                <label class="form-label">توضیحات محصول</label>
                <textarea
                  class="form-control"
                  rows="4"
                  placeholder="توضیحات کامل محصول را وارد کنید..."
                ></textarea>
              </div>
            </div>
          </div>

          <!-- Images -->
          <div class="admin-card">
            <h5 class="mb-4">
              <span class="step-indicator">۲</span>
              تصاویر محصول
            </h5>
            <div class="image-upload mb-4">
              <i class="bi bi-cloud-arrow-up fs-1 mb-3"></i>
              <h6>تصاویر را اینجا رها کنید یا کلیک کنید</h6>
              <p class="text-secondary mb-0">
                فرمت‌های مجاز: JPG, PNG - حداکثر سایز: 2MB
              </p>
            </div>
            <div class="row g-3">
              <div class="col-md-3">
                <div class="position-relative">
                  <img
                    src="/api/placeholder/200/200"
                    class="img-fluid rounded"
                    alt=""
                  />
                  <button
                    class="btn btn-sm btn-danger position-absolute top-0 end-0 m-2"
                  >
                    <i class="bi bi-trash"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Pricing -->
          <div class="admin-card">
            <h5 class="mb-4">
              <span class="step-indicator">۳</span>
              قیمت‌گذاری
            </h5>
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">قیمت به دلار *</label>
                <div class="input-group">
                  <input
                    type="number"
                    class="form-control"
                    placeholder="129.99"
                  />
                  <span class="input-group-text bg-transparent text-light"
                    >$</span
                  >
                </div>
              </div>
              <div class="col-md-6">
                <label class="form-label">قیمت به تومان (خودکار)</label>
                <div class="input-group">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="۵,۸۵۰,۰۰۰"
                    disabled
                  />
                  <span class="input-group-text bg-transparent text-light"
                    >تومان</span
                  >
                </div>
              </div>
              <div class="col-md-6">
                <label class="form-label">تخفیف (درصد)</label>
                <div class="input-group">
                  <input
                    type="number"
                    class="form-control"
                    id="discountPercent"
                    min="0"
                    max="100"
                    placeholder="0"
                    onchange="validateDiscount(this)"
                  />
                  <span class="input-group-text bg-transparent text-light"
                    >%</span
                  >
                </div>
              </div>
              <div class="col-md-6">
                <label class="form-label">قیمت نهایی با تخفیف (خودکار)</label>
                <div class="input-group">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="۵,۲۶۵,۰۰۰"
                    disabled
                  />
                  <span class="input-group-text bg-transparent text-light"
                    >تومان</span
                  >
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <!-- Product Variations -->
          <div class="admin-card">
            <div class="d-flex justify-content-between align-items-center mb-4">
              <h5 class="mb-0">تنوع محصول</h5>
              <button class="action-btn" onclick="addVariation()">
                <i class="bi bi-plus-lg me-2"></i>
                افزودن تنوع
              </button>
            </div>

            <!-- Variation Items -->
            <div class="variation-list">
              <div class="variation-item">
                <div class="row g-3">
                  <div class="col-md-6">
                    <label class="form-label">نوع</label>
                    <select class="form-select">
                      <option>سایز</option>
                      <option>رنگ</option>
                    </select>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">مقدار</label>
                    <input
                      type="text"
                      class="form-control"
                      placeholder="مثال: 42"
                    />
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">موجودی</label>
                    <input type="number" class="form-control" value="10" />
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">قیمت اضافه</label>
                    <input type="number" class="form-control" placeholder="0" />
                  </div>
                </div>
                <button class="btn btn-sm btn-outline-danger mt-3">حذف</button>
              </div>
            </div>
          </div>

          <!-- Inventory -->
          <div class="admin-card">
            <h5 class="mb-4">موجودی</h5>
            <div class="form-check form-switch mb-3">
              <input
                class="form-check-input"
                type="checkbox"
                id="manageStock"
              />
              <label class="form-check-label" for="manageStock"
                >مدیریت موجودی</label
              >
            </div>
            <div class="mb-3">
              <label class="form-label">موجودی کل</label>
              <input type="number" class="form-control" value="100" />
            </div>
            <div class="mb-3">
              <label class="form-label">حداقل موجودی</label>
              <input type="number" class="form-control" value="10" />
              <small class="text-secondary"
                >در صورت رسیدن به این عدد، هشدار داده می‌شود</small
              >
            </div>
          </div>

          <!-- Additional Information -->
          <div class="admin-card">
            <h5 class="mb-4">اطلاعات تکمیلی</h5>
            <div class="mb-3">
              <label class="form-label">برند</label>
              <input
                type="text"
                class="form-control"
                placeholder="مثال: Nike"
              />
            </div>
            <div class="mb-3">
              <label class="form-label">کد محصول</label>
              <input
                type="text"
                class="form-control"
                placeholder="مثال: NK-270-BLK"
              />
            </div>
            <div class="mb-3">
              <label class="form-label">وزن (کیلوگرم)</label>
              <input
                type="number"
                step="0.1"
                class="form-control"
                placeholder="مثال: 0.5"
              />
            </div>
            <div class="mb-3">
              <label class="form-label">کشور سازنده</label>
              <input
                type="text"
                class="form-control"
                placeholder="مثال: Vietnam"
              />
            </div>
          </div>

          <!-- SEO Information -->
          <div class="admin-card">
            <h5 class="mb-4">اطلاعات SEO</h5>
            <div class="mb-3">
              <label class="form-label">عنوان متا</label>
              <input
                type="text"
                class="form-control"
                placeholder="عنوان سئو محصول"
              />
            </div>
            <div class="mb-3">
              <label class="form-label">توضیحات متا</label>
              <textarea
                class="form-control"
                rows="3"
                placeholder="توضیحات سئو محصول"
              ></textarea>
            </div>
            <div class="mb-3">
              <label class="form-label">کلمات کلیدی</label>
              <input
                type="text"
                class="form-control"
                placeholder="با کاما جدا کنید"
              />
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Success Modal -->
    <div class="modal fade" id="successModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content bg-secondary">
          <div class="modal-body text-center p-4">
            <i class="bi bi-check-circle text-success display-1 mb-3"></i>
            <h5>محصول با موفقیت ذخیره شد!</h5>
            <p class="mb-4">محصول جدید با موفقیت در سیستم ثبت شد.</p>
            <div class="d-grid gap-2">
              <button class="action-btn" data-bs-dismiss="modal">
                بازگشت به لیست محصولات
              </button>
              <button class="action-btn" data-bs-dismiss="modal">
                افزودن محصول جدید
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Function to handle automatic price conversion and discount
      function calculatePrices() {
        const dollarPrice =
          parseFloat(
            document.querySelector('input[placeholder="129.99"]').value
          ) || 0;
        const discountPercent =
          parseFloat(document.getElementById('discountPercent').value) || 0;
        const exchangeRate = 80000; // نرخ تبدیل دلار به تومان

        // Calculate base price in Toman
        const basePrice = dollarPrice * exchangeRate;

        // Calculate discounted price
        const discountAmount = basePrice * (discountPercent / 100);
        const finalPrice = basePrice - discountAmount;

        // Update base price display
        document.querySelector('input[placeholder="۵,۸۵۰,۰۰۰"]').value =
          new Intl.NumberFormat('fa-IR').format(basePrice);

        // Update final price display
        document.querySelector('input[placeholder="۵,۲۶۵,۰۰۰"]').value =
          new Intl.NumberFormat('fa-IR').format(finalPrice);
      }

      // Add event listeners
      document.addEventListener('DOMContentLoaded', function () {
        // Price and discount change events
        const dollarInput = document.querySelector(
          'input[placeholder="129.99"]'
        );
        const discountInput = document.getElementById('discountPercent');

        dollarInput.addEventListener('input', calculatePrices);
        discountInput.addEventListener('input', calculatePrices);

        // Image upload handling
        const imageUpload = document.querySelector('.image-upload');
        imageUpload.addEventListener('click', function () {
          const input = document.createElement('input');
          input.type = 'file';
          input.accept = 'image/*';
          input.multiple = true;
          input.click();
        });
      });

      // Function to add new variation
      function addVariation() {
        const variationList = document.querySelector('.variation-list');
        const newVariation = document
          .querySelector('.variation-item')
          .cloneNode(true);
        newVariation.querySelector('input[type="text"]').value = '';
        newVariation.querySelector('input[type="number"]').value = '10';
        variationList.appendChild(newVariation);
      }

      // Function to save product
      function saveProduct() {
        // Here you would normally validate and submit the form
        const successModal = new bootstrap.Modal(
          document.getElementById('successModal')
        );
        successModal.show();
      }

      function validateDiscount(input) {
        if (input.value < 0) input.value = 0;
        if (input.value > 100) input.value = 100;
        calculatePrices();
      }
    </script>
  </body>
</html>
